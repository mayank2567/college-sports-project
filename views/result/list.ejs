<!--
including header content which is common for all pages
-->
<%- include ../layouts/header.ejs %>

	<% if (messages.error) { %>
		<p class="alert alert-danger" style="z-index:999;">
			<%- messages.error %>
		</p>
		<% } %>

			<% if (messages.success) { %>
				<p class="alert alert-success" style="z-index:999;">
					<%- messages.success %>
				</p>
				<% } %>

					<head>
						<link href="/assets/css/formstyle.css" rel="stylesheet">
					</head>

					<form action="/result" method="post" name="form" style="padding-top:200px;">
						<h1>View Result of Event</h1>
						<br>
						<input type="radio" name="gender" value="Male" checked> Male
						<br>
						<input type="radio" name="gender" value="Female"> Female
						<br>
						<table width="25%" border="0">

							<input type="hidden" name="url" value="add" />
							<select id="selectEvent" name="event">
								<option selected value="Select">Please Select a Event</option>
								<% for(var i=0; i<data.length; i++) {%>
									<option class="<%= data[i].gender%>" value="<%= data[i].id%>" test="<%= data[i].gender%>">
										<%= data[i].event_name%>
									</option>
									<br>
									<% } %>
							</select>

							<tr>

								<input type="submit" name="Submit" value="Search" />

							</tr>
						</table>
					</form>
					<!--	<table style="display : <%= success %>" width='80%' border=0>

						<tr style='text-align:left; background-color:#CCC'>
							<th>ID</th>
							<th>Event Name</th>
							<th>First</th>
							<th>Second</th>
							<th>Third</th>
							<th>Action</th>
						</tr>  -->

					<!--
		Using FOREACH LOOP for the students array
		
		myArray.forEach(function(el, index) {
			// el - current element, i - index
		});
	-->
					<!--	<% if (result) { %>
							<% let i = 0%>
								<% result.forEach(function(event){ %>

									<tr>
										<td>
											<%= ++i %>
										</td>
										<td>
											<%= event_name %>
										</td>
										<td>
											<%= event.first %>
										</td>
										<td>
											<%= event.second %>
										</td>
										<td>
											<%= event.third %>
										</td> -->
					<!-- <td>
											<div style="float:left">
												<a href='/events/edit/<%= event.id %>'>Edit</a> &nbsp;
												<form method="post" action="/events/delete/<%= event.id %>" style="float:right">
													<input type="submit" name="delete" value='Delete' onClick="return confirm('Are you sure you want to delete?')" />
													<input type="hidden" name="_method" value="DELETE" />
												</form>
											</div>
										</td> 
					</tr>  -->
					<!--		<% }) %>
										<% } %>

					</table>
					<table style="display : <%= success %>" width='80%' border=0>

						<tr style='text-align:left; background-color:#CCC'>
							<th>ID</th>
							<th>Name</th>
							<th>year</th>
							<th>course</th>
							<th>Rol no</th>
							<th>Branch</th>
							<th>Gender</th>
							<th>Action</th>
						</tr>  -->

					<!--
								Using FOREACH LOOP for the students array
								
								myArray.forEach(function(el, index) {
									// el - current element, i - index
								});
							-->
					<!--		<% if (students) { %>
							<% let i = 0%>
								<% students.forEach(function(student){ %>

									<tr>
										<td>
											<%= ++i %>
										</td>
										<td>
											<%= student.name  %>
										</td>
										<td>
											<%= student.year %>
										</td>
										<td>
											<%= student.course %>
										</td>
										<td>
											<%= student.rollno %>
										</td>
										<td>
											<%= student.branch %>
										</td>
										<td>
											<%= student.gender %>
										</td>
									</tr>
									<% }) %>
										<% } %>

					</table>
				-->

					<div style="padding-left:120px;padding-right:120px" class="printWinners">
						<h1>Winners of the Event</h1>
						<table id="example" class="table table-striped table-bordered" cellspacing="0" width="100%">
							<thead>
								<tr>
									<th>ID</th>
									<th>Event Name</th>
									<th>First</th>
									<th>Second</th>
									<th>Third</th>


								</tr>
							</thead>
							<tfoot>
								<tr>
									<th>ID</th>
									<th>Event Name</th>
									<th>First</th>
									<th>Second</th>
									<th>Third</th>


								</tr>
							</tfoot>
							<tbody>
								<% if (result) { %>
									<% let i = 0%>
										<% result.forEach(function(event){ %>

											<tr>
												<td>
													<%= ++i %>
												</td>
												<td>
													<%= event_name %>
												</td>
												<td>
													<%= event.first %>
												</td>
												<td>
													<%= event.second %>
												</td>
												<td>
													<%= event.third %>
												</td>
												<!-- <td>
																				<div style="float:left">
																					<a href='/events/edit/<%= event.id %>'>Edit</a> &nbsp;
																					<form method="post" action="/events/delete/<%= event.id %>" style="float:right">
																						<input type="submit" name="delete" value='Delete' onClick="return confirm('Are you sure you want to delete?')" />
																						<input type="hidden" name="_method" value="DELETE" />
																					</form>
																				</div>
																			</td> -->
											</tr>
											<% }) %>
												<% } %>

							</tbody>
						</table>



						<script>
							function PrintElem(elem) {
								Popup($(elem).html());
							}

							function Popup(data) {
								var mywindow = window.open('', 'new div', 'height=400,width=600');
								mywindow.document.write('<html><head><title>my div</title>');
								/*optional stylesheet*/ //mywindow.document.write('<link rel="stylesheet" href="main.css" type="text/css" />');
								mywindow.document.write('</head><body >');
								mywindow.document.write(data);
								mywindow.document.write('</body></html>');

								mywindow.print();
								mywindow.close();

								return true;
							}


							$(document).ready(function () {
								$('#example').DataTable();
							});
						</script>
					</div>
					<input class="btn" style="margin-left:120px" type="button" value="Print Winners" onclick="PrintElem('.printWinners')" />

					<div style="padding-top:50px;padding-left:120px;padding-right:120px" class="printPart">
						<h1>Best Athelete</h1>
					</div>
					<input id="best" class="btn" style="margin-left:120px" type="button" value="Show Best Athelete" />
					<div style="padding-top:50px;padding-left:120px;padding-right:120px" id="athlete" class="hide">

						<table id="customers">
							<tr>
								<th>Name</th>
								<th>Roll NO</th>
								<th>Year</th>
								<th>Gender</th>
							</tr>
							<tr>
								<td>Mandeep Kaur</td>
								<td>1410873</td>
								<td>Fourth</td>
								<td>Female</td>
							</tr>
							<tr>
								<td>harnoor singh</td>
								<td>1707014</td>
								<td>First</td>
								<td>Male</td>
							</tr>

						</table>
					</div>


					<div style="padding-top:50px;padding-left:120px;padding-right:120px" class="printPart">
						<h1>List of Participants</h1>
						<table id="example1" class="table table-striped table-bordered" cellspacing="0" width="100%">
							<thead>
								<tr>
									<th>ID</th>
									<th>Name</th>
									<th>Year</th>
									<th>Course</th>
									<th>Roll no</th>
									<th>Branch</th>
									<th>Gender</th>


								</tr>
							</thead>
							<tfoot>
								<tr>
									<th>ID</th>
									<th>Name</th>
									<th>Year</th>
									<th>Course</th>
									<th>Roll No</th>
									<th>Branch</th>
									<th>Gender</th>


								</tr>
							</tfoot>
							<tbody>
								<% if (students) { %>
									<% let i = 0%>
										<% students.forEach(function(student){ %>

											<tr>
												<td>
													<%= ++i %>
												</td>
												<td>
													<%= student.name  %>
												</td>
												<td>
													<%= student.year %>
												</td>
												<td>
													<%= student.course %>
												</td>
												<td>
													<%= student.rollno %>
												</td>
												<td>
													<%= student.branch %>
												</td>
												<td>
													<%= student.gender %>
												</td>
											</tr>
											<% }) %>
												<% } %>
							</tbody>
						</table>
						<script>
							$(document).ready(function () {
								$('#example1').DataTable();

								$('#selectEvent option.Female').hide();
								$('#selectEvent option.Male').show();
								$('input[type=radio][name=gender]').change(function () {

									if (this.value == 'Male') {
										$('#selectEvent option.Female').hide();
										$('#selectEvent option.Male').show();
									} else {
										$('#selectEvent option.Male').hide();
										$('#selectEvent option.Female').show();
									}
								});
							});

							var select = $('#selectEvent');
							select.html(select.find('option').sort(function (x, y) {
								// to change to descending order switch "<" for ">"
								return $(x).text() > $(y).text() ? 1 : -1;
							}));


							$('#best').on('click', function () {
								setTimeout(function () { $("#athlete").removeClass("hide"); }, 1500);

							});
						</script>
					</div>
					<input class="btn" style="margin-left:120px" type="button" value="Print Participants" onclick="PrintElem('.printPart')" />

					<!--
including footer content which is common for all pages
-->
					<%- include ../layouts/footer.ejs %>